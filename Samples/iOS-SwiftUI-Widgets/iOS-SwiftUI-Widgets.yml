# yaml-language-server: $schema=../../schema/xcodegen.schema.json

name: iOS-SwiftUI-Widgets
include:
  - ../Shared/feature-flags.yml
createIntermediateGroups: true
generateEmptyDirectories: true
configs:
  Debug: debug
  Release: release
fileGroups:
  - ../Shared/Config
  - iOS-SwiftUI-Widgets.yml
projectReferences:
  Sentry:
    path: ../../Sentry.xcodeproj
  SentrySampleShared:
    path: ../SentrySampleShared/SentrySampleShared.xcodeproj
options:
  bundleIdPrefix: io.sentry.sentry-cocoa.samples
targets:
  iOS-SwiftUI-Widgets:
    type: application
    platform: iOS
    deploymentTarget: "18.0"
    sources:
      - iOS-SwiftUI-Widgets
      - Shared
    dependencies:
      - target: Sentry/Sentry
      - target: SentrySampleShared/SentrySampleShared
      - target: iOS-SwiftUI-Widgets-WidgetExtension
      - target: iOS-SwiftUI-Widgets-LiveActivity
    settings:
      CODE_SIGN_ENTITLEMENTS: iOS-SwiftUI-Widgets/Resources/Entitlements.entitlements
    configFiles:
      Debug: iOS-SwiftUI-Widgets.xcconfig
      Release: iOS-SwiftUI-Widgets.xcconfig
  iOS-SwiftUI-Widgets-WidgetExtension:
    type: app-extension
    platform: iOS
    deploymentTarget: "18.0"
    sources:
      - iOS-SwiftUI-Widgets-WidgetExtension
      - Shared
    dependencies:
      - target: Sentry/Sentry
      - target: SentrySampleShared/SentrySampleShared
    settings:
      CODE_SIGN_ENTITLEMENTS: iOS-SwiftUI-Widgets-WidgetExtension/Resources/Entitlements.entitlements
    configFiles:
      Debug: iOS-SwiftUI-Widgets-WidgetExtension.xcconfig
      Release: iOS-SwiftUI-Widgets-WidgetExtension.xcconfig
  iOS-SwiftUI-Widgets-LiveActivity:
    type: app-extension
    platform: iOS
    deploymentTarget: "18.0"
    sources:
      - iOS-SwiftUI-Widgets-LiveActivity
      - Shared
    dependencies:
      - target: Sentry/Sentry
      - target: SentrySampleShared/SentrySampleShared
    settings:
      CODE_SIGN_ENTITLEMENTS: iOS-SwiftUI-Widgets-LiveActivity/Resources/Entitlements.entitlements
    configFiles:
      Debug: iOS-SwiftUI-Widgets-LiveActivity.xcconfig
      Release: iOS-SwiftUI-Widgets-LiveActivity.xcconfig
schemes:
  iOS-SwiftUI-Widgets:
    build:
      targets:
        iOS-SwiftUI-Widgets: all
        iOS-SwiftUI-Widgets-WidgetExtension: all
        iOS-SwiftUI-Widgets-LiveActivity: all
    run:
      config: Debug
    profile:
      config: Release
    archive:
      config: Release
  iOS-SwiftUI-Widgets-WidgetExtension:
    build:
      targets:
        iOS-SwiftUI-Widgets: all
        iOS-SwiftUI-Widgets-WidgetExtension: all
    run:
      config: Debug
      askForAppToLaunch: true
      environmentVariables:
        _XCWidgetKind: SampleWidget
  iOS-SwiftUI-Widgets-WidgetControl:
    build:
      targets:
        iOS-SwiftUI-Widgets: all
        iOS-SwiftUI-Widgets-WidgetExtension: all
    run:
      config: Debug
      askForAppToLaunch: true
      environmentVariables:
        _XCWidgetKind: SampleWidgetControl
  iOS-SwiftUI-Widgets-LiveActivity:
    build:
      targets:
        iOS-SwiftUI-Widgets: all
        iOS-SwiftUI-Widgets-WidgetExtension: all
        iOS-SwiftUI-Widgets-LiveActivity: all
    run:
      config: Debug
    profile:
      config: Release
    archive:
      config: Release
