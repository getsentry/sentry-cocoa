# yaml-language-server: $schema=../../schema/xcodegen.schema.json

name: iOS-SwiftUI-Widgets
include:
  - ../Shared/feature-flags.yml
createIntermediateGroups: true
generateEmptyDirectories: true
configs:
  Debug: debug
  Release: release
fileGroups:
  - ../Shared/Config
  - App/Configuration
  - WidgetExtension/Configuration
  - LiveActivity/Configuration
  - iOS-SwiftUI-Widgets.yml
projectReferences:
  Sentry:
    path: ../../Sentry.xcodeproj
  SentrySampleShared:
    path: ../SentrySampleShared/SentrySampleShared.xcodeproj
options:
  bundleIdPrefix: io.sentry.sentry-cocoa.samples
  defaultSourceDirectoryType: syncedFolder
targets:
  App:
    type: application
    platform: iOS
    deploymentTarget: "18.0"
    sources:
      - App/Sources
      - path: App/Resources
        type: group
        excludes:
          - "**/Info.plist"
          - "**/*.entitlements"
      - Shared
    dependencies:
      - target: Sentry/Sentry
      - target: SentrySampleShared/SentrySampleShared
      - target: WidgetExtension
      - target: LiveActivity
    settings:
      CODE_SIGN_ENTITLEMENTS: App/Configuration/Entitlements.entitlements
    configFiles:
      Debug: App/Configuration/iOS-SwiftUI-Widgets.xcconfig
      Release: App/Configuration/iOS-SwiftUI-Widgets.xcconfig
  WidgetExtension:
    type: app-extension
    platform: iOS
    deploymentTarget: "18.0"
    sources:
      - WidgetExtension/Sources
      - WidgetExtension/Resources
      - Shared
    dependencies:
      - target: Sentry/Sentry
      - target: SentrySampleShared/SentrySampleShared
    configFiles:
      Debug: WidgetExtension/Configuration/iOS-SwiftUI-Widgets-WidgetExtension.xcconfig
      Release: WidgetExtension/Configuration/iOS-SwiftUI-Widgets-WidgetExtension.xcconfig
  LiveActivity:
    type: app-extension
    platform: iOS
    deploymentTarget: "18.0"
    sources:
      - LiveActivity/Sources
      - LiveActivity/Resources
      - Shared
    dependencies:
      - target: Sentry/Sentry
      - target: SentrySampleShared/SentrySampleShared
    configFiles:
      Debug: LiveActivity/Configuration/iOS-SwiftUI-Widgets-LiveActivity.xcconfig
      Release: LiveActivity/Configuration/iOS-SwiftUI-Widgets-LiveActivity.xcconfig
schemes:
  iOS-SwiftUI-Widgets:
    build:
      targets:
        App: all
        WidgetExtension: all
        LiveActivity: all
    run:
      config: Debug
    profile:
      config: Release
    archive:
      config: Release
  iOS-SwiftUI-Widgets-WidgetExtension:
    build:
      targets:
        App: all
        WidgetExtension: all
    run:
      config: Debug
      askForAppToLaunch: true
      environmentVariables:
        _XCWidgetKind: SampleWidget
  iOS-SwiftUI-Widgets-WidgetControl:
    build:
      targets:
        App: all
        WidgetExtension: all
    run:
      config: Debug
      askForAppToLaunch: true
      environmentVariables:
        _XCWidgetKind: SampleWidgetControl
  iOS-SwiftUI-Widgets-LiveActivity:
    build:
      targets:
        App: all
        WidgetExtension: all
        LiveActivity: all
    run:
      config: Debug
    profile:
      config: Release
    archive:
      config: Release
